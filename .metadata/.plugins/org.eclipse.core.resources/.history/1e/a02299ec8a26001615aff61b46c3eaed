package jammazwan.entity;

import static org.junit.Assert.*;

import org.apache.camel.Exchange;
import org.apache.camel.Processor;
import org.apache.camel.builder.RouteBuilder;
import org.apache.camel.model.dataformat.JsonLibrary;
import org.apache.camel.test.spring.CamelSpringTestSupport;
import org.junit.Test;
import org.springframework.context.support.AbstractApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;

public class XmplProjectTest extends CamelSpringTestSupport {

	@Test
	public void test() {
		String xyzCode = "xaa";
		String name = "ObjectToJsonFile";
		String desc = "Create an object and save it as json in a file";
		String version = "0.1.0-SNAPSHOT";
		String technology = "jackson, file";
		String specialInstructions = "be careful not to ever do the wrong thing, it could be incorrect. Do the right thing instead";
		String pckg = "jammazwan";
		XmplProject xmplProject = new XmplProject(xyzCode, name, desc, version, technology, specialInstructions, pckg);
		template.requestBody("direct:start", xmplProject);
	}

	@Override
	protected AbstractApplicationContext createApplicationContext() {
		return new ClassPathXmlApplicationContext("META-INF/spring/xroute-camel-context.xml");

	}

	class SomeThingRoutes extends RouteBuilder {

		@Override
		public void configure() throws Exception {
			from("direct:start").process(new Processor() {
				public void process(Exchange exchange) throws Exception {
					exchange.getIn().setHeader("CamelFileName", "frog.json");
				}
			}).marshal().json(JsonLibrary.Jackson, true).to("file:.");
		}

	}

}
